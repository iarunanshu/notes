# Network Protocols - Detailed Notes

## Overview
Network protocols define rules and regulations for communication between two systems/computers over a network. This is fundamental for high-level system design.

---

## OSI Model Layers (Brief Overview)
The seven layers of networking:
1. Application Layer
2. Presentation Layer
3. Session Layer
4. **Transport Layer** (Focus area)
5. Network Layer
6. Data Link Layer
7. Physical Layer

**Key Focus**: Application Layer and Transport Layer

---

## Application Layer Protocols

### 1. Client-Server Model

#### A. HTTP (Hypertext Transfer Protocol)
- **Type**: Connection-oriented
- **Communication**: One-way (client initiates, server responds)
- **Usage**: Accessing web pages
- **Features**: Hypertext allows jumping from one page to another
- **Client → Request → Server → Response → Client**

#### B. FTP (File Transfer Protocol)
- **Connections**: Two connections maintained
    - **Control Connection**: Always remains active
    - **Data Connection**: Can be created and disconnected
- **Security Issue**: Data connection is NOT encrypted
- **Status**: Not widely used anymore due to security concerns
- **Replacement**: HTTPS (HTTP Secure) is preferred

#### C. SMTP (Simple Mail Transfer Protocol)
- **Purpose**: Sending emails
- **Used with**:
    - **IMAP**: For receiving and accessing mail (widely used)
    - **POP3**: Downloads and deletes mail from server (less common now)
- **Architecture**:
  ```
  User → User Agent → MTA Client → MTA Server → User Agent → User
  ```
- **Model**: Client-server architecture

#### D. WebSocket
- **Type**: Bidirectional communication
- **Architecture**: Still client-server (NOT peer-to-peer)
- **Key Feature**: Both client and server can initiate communication
- **Communication Flow**:
  ```
  Client ↔ Server ↔ Client
  (Two-way communication)
  ```
- **Important Note**: Clients cannot communicate directly with each other
    - Client 1 → Server → Client 2
    - NOT Client 1 → Client 2 directly
- **Use Cases**:
    - **Messaging apps** (WhatsApp, Telegram)
    - Real-time notifications
    - Chat applications
- **Why WebSocket for messaging?**
    - Server needs to push messages to clients
    - Client doesn't need to continuously poll ("Did message come?")
    - Efficient two-way communication

---

### 2. Peer-to-Peer Model

#### WebRTC (Web Real-Time Communication)
- **Type**: Peer-to-peer protocol
- **Architecture**:
  ```
  Client ↔ Client ↔ Server
  (All can talk to each other)
  ```
- **Key Feature**: Direct communication between clients without going through server
- **Advantage**: Fast (no server intermediary needed)
- **Underlying Protocol**: Uses UDP at transport layer
- **Use Cases**:
    - **Video calling** (Google Meet, Zoom)
    - **Live streaming**
    - Real-time communication

---

## Transport Layer Protocols

### 1. TCP/IP (Transmission Control Protocol)

#### Features:
- **Connection-oriented**: Virtual connection maintained
- **Data Handling**:
    - Data divided into small packets
    - Packets given sequence numbers
- **Ordering**: Maintains packet order
- **Acknowledgment**: Every packet is acknowledged
- **Reliability**: If packet doesn't arrive, it's resent
- **Error Checking**: Ensures data integrity

#### Process:
```
Data → Packets → Sequencing → Transmission → Ordering → Acknowledgment
```

#### Characteristics:
- ✅ Reliable
- ✅ Ordered delivery
- ✅ Error checking
- ❌ Slower than UDP

---

### 2. UDP (User Datagram Protocol)

#### Features:
- **Connectionless**: No connection maintained
- **Data Handling**:
    - Data divided into small datagrams
    - Sent parallel on multiple virtual connections
- **No Ordering**: Packets may arrive out of order
- **No Acknowledgment**: "Best effort" delivery
- **No Retransmission**: Lost packets are not resent

#### Characteristics:
- ✅ **Fast** (main advantage)
- ✅ Low latency
- ❌ No ordering guarantee
- ❌ Packet loss possible
- ❌ No reliability guarantee

#### Why UDP is Fast:
- No connection establishment
- No acknowledgment overhead
- No ordering overhead
- No retransmission

#### Use Cases:
- **Live streaming**
- **Video calling**
- **Real-time gaming**
- Situations where:
    - Speed > Reliability
    - Occasional data loss is acceptable
    - Ordering is not critical

**Example**: In a video call, if you miss a frame, you continue with the next frame rather than waiting for the missed one.

---

## Protocol Selection Guide

| Use Case | Protocol | Reason |
|----------|----------|--------|
| **Messaging Apps** (WhatsApp, Telegram) | WebSocket | Two-way communication needed; server must push messages to clients |
| **Video Calling** (Google Meet, Zoom) | WebRTC + UDP | Fast, peer-to-peer, real-time communication; minor packet loss acceptable |
| **Live Streaming** | UDP | Speed critical; ordering not essential; packet loss tolerable |
| **Web Browsing** | HTTP/HTTPS | Standard request-response; security (HTTPS) |
| **File Transfers** (secure) | HTTPS | Encrypted; secure; FTP not recommended |
| **Email Sending** | SMTP | Standard email protocol |
| **Email Receiving** | IMAP | Access from multiple devices |
\

## Key Takeaways

1. **Client-Server vs Peer-to-Peer**:
    - Client-Server: Client initiates, server responds
    - Peer-to-Peer: Any node can initiate with any other node

2. **WebSocket is NOT Peer-to-Peer**:
    - Still follows client-server model
    - Just bidirectional communication

3. **TCP vs UDP**:
    - TCP: Reliable, ordered, slower
    - UDP: Fast, unreliable, unordered

4. **Security Consideration**:
    - FTP is insecure (unencrypted data connection)
    - Use HTTPS for secure transfers

5. **Protocol Selection Depends On**:
    - Speed requirements
    - Reliability needs
    - Ordering importance
    - Communication pattern (one-way vs two-way)

## Common Mistakes to Avoid

❌ Calling WebSocket peer-to-peer (it's client-server with bidirectional communication)
❌ Using FTP for secure file transfers (use HTTPS instead)
❌ Confusing SMTP with IMAP/POP3 (SMTP sends, IMAP/POP3 receive)
❌ Using TCP when UDP would be more appropriate for real-time applications